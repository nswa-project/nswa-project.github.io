<!DOCTYPE html><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>NSWA Ranga Web</title><meta name=viewport content="width=device-width,initial-scale=1"><style>body{margin:20px;margin-left:100px;margin-right:100px;font-family:sans-serif;padding-left:340px}body{--code-background:#f9f9f9;--code-font-size:15px;--code-font-family:'Roboto Mono','Ubuntu Mono','Noto Sans Mono',Consolas,Menlo,Monaco,'Lucida Console','DejaVu Sans Mono','Bitstream Vera Sans Mono',monospace}a{color:#08c;text-decoration:none;outline:0}a:hover{color:#005580;text-decoration:none;outline:0}a:active,a:hover{outline:0}a:focus{outline:0}p{word-wrap:break-word}div.sourceCode{display:inline}pre{padding:10px;background-color:var(--code-background);overflow:auto;font-size:var(--code-font-size);font-family:var(--code-font-family)}pre>code{font-size:var(--code-font-size);font-family:var(--code-font-family)}:not(pre)>code{background-color:var(--code-background);padding:4px;font-size:var(--code-font-size);font-family:var(--code-font-family)}blockquote{margin-left:10px;border-left:5px solid #afafaf;padding-left:10px;color:#464646}table{border-width:1px;border-color:#464646;border-collapse:collapse}table th{border-width:1px;padding:8px;border-style:solid;border-color:#464646;background-color:#eaeaea}table td{border-width:1px;padding:8px;border-style:solid;border-color:#464646;background-color:#fff}#FontLoading{display:none;position:fixed;z-index:999;top:50px;right:20px;max-width:300px;background-color:#ffc;padding:10px;box-shadow:0 0 10px 0 #afafaf}#TOC{background-color:var(--code-background);height:100%;width:340px;max-width:340px;position:fixed;overflow:scroll;overflow-x:auto;left:0;top:0}#TOC_MoblieHelper{padding:6px;display:none;position:fixed;left:0;top:0;background:#fff}@media (max-width:980px){body{margin:10px;margin-left:10px;margin-right:10px}}@media (max-width:720px){body{margin:10px;padding-top:30px;padding-left:0;padding-right:0}#TOC{height:unset;width:unset;max-width:unset;position:unset;overflow:unset;display:none}#TOC_MoblieHelper{display:block}}img{margin:20px 0}.box_warn{border:1px solid #d1d5da;background-color:#ffc;padding:8px;margin:8px}</style><div id=TOC_MoblieHelper><a href=# onclick='document.getElementById("TOC").style.display="block",document.getElementById("TOC_MoblieHelper").style.display="none"'>显示目录</a></div><div id=FontLoading>正在从 Google Fonts 加载字体<br>如果你长时间无法加载字体，则说明你的网络连接或者 DNS 可能有问题</div><div class=box_warn>警告：该文档是从旧文档树中经过简单整理直接发布的，由于当前文档缺乏维护，因此对于当前开源版本主线 NSWA Ranga 可能少部分内容有所过时。如果你发现问题，请前往<a href=https://github.com/nswa-project/website/issues target=_blank>bugtracer</a>提交错误报告。</div><div id=TOC><ul><li><a href=#smb-文件共享和下载管理器>SMB 文件共享和下载管理器</a><ul><li><a href=#准备工作>准备工作</a><li><a href=#文件共享>文件共享</a><ul><li><a href=#配置>配置</a><li><a href=#客户端连接>客户端连接</a></ul><li><a href=#下载管理器>下载管理器</a><ul><li><a href=#配置-1>配置</a><li><a href=#客户端连接-1>客户端连接</a></ul></ul></ul></div><h1 id=smb-文件共享和下载管理器>SMB 文件共享和下载管理器</h1><blockquote><p>本文主要使用 GUI 界面进行操作，使用命令行工具进行配置的方法请参考<a href=intro-cmdline.html>命令行工具手册</a><p>这些功能需要 NSWA Ranga 4.5.1 及以上版本。且需要你的设备引出了 USB 口。</blockquote><p>NSWA Ranga 利用 Samba 实现 SMB 文件共享，允许局域网用户访问外部存储设备（例如 USB 存储器或 SD 卡）<p>NSWA Ranga 利用 Aria2 提供下载管理，允许局域网用户通过 Aria2 客户端使用 RPC 远程过程调用下载文件到外部存储设备（例如 USB 存储器或 SD 卡）<p>目前外部存储设备仅支持第一块 SCSI 存储器（包括在 USB 上运行的 SCSI）上的第一个文件系统。我们把这个文件系统称为<code>main</code>文件系统，以便未来支持更多的文件系统。<p>目前仅支持以下几个文件系统:<code>exFAT</code>、<code>vFAT</code>(FAT32) 和<code>FAT</code>(FAT16)<h2 id=准备工作>准备工作</h2><p>你可以在 Web 控制台上查看是否已经识别 USB 设备，是否已经挂载主分区。<p><img src=res-euman-smbanddm/a1.png><p><strong>注意！</strong>，NSWA Ranga 默认开启“圈养门户”（captive portal）功能，以便在未连接 ‘netkeeper’ 接口时自动弹出让浏览器打开 Web 控制台。因此此功能会劫持所有网络流量，因此会导致在未连接 ‘netkeeper’ 接口时无法使用 SMB 文件共享和下载管理器，<strong>不影响 ‘netkeeper’ 接口已连接的情况！</strong>，如果确实需要在未连接 ‘netkeeper’ 接口时使用，请关闭“圈养门户”，但在未连接 ‘netkeeper’ 接口时则无法让浏览器自动弹出 Web 控制台。<p><img src=res-euman-smbanddm/a2.png><h2 id=文件共享>文件共享</h2><h3 id=配置>配置</h3><p>前往系统管理-&gt;额外（可选）服务，在“Samba 文件共享服务下面”，执行以下操作<ul><li><p>第一次必须先设置用户密码，点击“服务特定配置”，然后在其中设置密码。<li><p>点击“启动”按钮启动服务</ul><blockquote><p>NSWA Ranga 现在支持额外（可选）服务开机自启动，只需勾选选择框即可，但下图是旧版本 NSWA 截图，不能反映这一点。</blockquote><p><img src=res-euman-smbanddm/a3.png><h3 id=客户端连接>客户端连接</h3><p>客户端可以连接地址为<code>ranga.lan</code>或者<code>192.168.1.1</code>上的 SMB 服务，共享名为<code>ranga-mainfs</code><pre><code>smb://ranga.lan/ranga-mainfs
\\ranga.lan\ranga-mainfs</code></pre><p>用户名为<code>user</code><p>密码为你设置的密码<h4 id=在-gnulinux-和其他类-unix-系统上连接>在 GNU/Linux 和其他类 UNIX 系统上连接</h4><blockquote><p>如果你使用 GNOME 等桌面环境，则可以在相应的桌面环境中挂载 SMB/CIFS 文件共享</blockquote><p>使用 smbclient<pre><code>$ smbclient //ranga.lan/ranga-mainfs -U user
WARNING: The &quot;syslog&quot; option is deprecated
Enter WORKGROUP\user&#39;s password: 
Try &quot;help&quot; to get a list of possible commands.
smb: \&gt; </code></pre><p>使用 CIFS 挂载<pre><code>mount -t cifs -o username=user,password=&lt;PASSWORD&gt;,vers=2.0 //ranga.lan/ranga-mainfs &lt;MOUNT_POINT&gt;</code></pre><h4 id=在-ms-windows-上连接>在 MS-Windows 上连接</h4><p>在“计算机”/“此电脑”中选择“映射网络驱动器”，映射<code>\\ranga.lan\ranga-mainfs</code>或者<code>\\192.168.1.1\ranga-mainfs</code>，输入用户名<code>user</code>和你设置的密码，根据需要勾选“自动重新连接”/“记住我的凭据”，然后点击“确定”即可<p><img src=res-euman-smbanddm/a4.png><p><img src=res-euman-smbanddm/a5.png><h4 id=在-macos-上连接>在 macOS 上连接</h4><p>打开 Finder，然后点击菜单“前往”-&gt;“连接服务器…”，服务器地址为<code>smb://ranga.lan/ranga-mainfs</code>或者<code>smb://192.168.1.1/ranga-mainfs</code>，点击“连接”，然后输入名称和密码。<p><img src=res-euman-smbanddm/a6.png><h2 id=下载管理器>下载管理器</h2><h3 id=配置-1>配置</h3><p>前往系统管理-&gt;额外（可选）服务，在“Aria2 下载管理器”，执行以下操作<ul><li><p>可以设置 RPC 令牌，点击“服务特定配置”，然后在其中设置 RPC 令牌。如果不设置令牌，将使用默认令牌<code>123456</code><li><p>点击“启动”按钮启动服务</ul><blockquote><p>NSWA Ranga 现在支持额外（可选）服务开机自启动，只需勾选选择框即可，但下图是旧版本 NSWA 截图，不能反映这一点。</blockquote><p><img src=res-euman-smbanddm/a7.png><h3 id=客户端连接-1>客户端连接</h3><p>可以使用任意 Aria2 客户端连接到服务器，例如 webui-aria2、AriaNG、yaaw 等。<p>我们制作了一个修改后的 webui-aria2，可以更好地与 NSWA Ranga Aria2 服务器使用。<p><a href=../swdl/webui-aria2.zip>Download</a><p>如果你修改了令牌，编辑<code>webui-aria2/webui-aria2/config.js</code>，将第 7 行<code>token: "123456"</code>中的<code>123456</code>，改为你设置的令牌。<p>用 Google Chrome 或者 Mozilla Firefox 打开<code>webui-aria2/index.html</code>，即可食用。<p>我们亦提供“应用”模式，GNU/Linux 用户运行<code>appmode-linux.sh</code>，Windows 用户编辑<code>appmode-windows.bat</code>将 Google Chrome 安装路径设置为你的计算机上的安装路径（通常无需更改）后运行即可启动 webui-aria2。<p><img src=res-euman-smbanddm/a8.png></p><script>document.getElementById("FontLoading").style.display="block";var link=document.createElement("link");link.setAttribute("rel","stylesheet"),link.type="text/css",link.href="https://fonts.googleapis.com/css?family=Roboto+Mono",document.head.appendChild(link),link.onload=function(){document.getElementById("FontLoading").style.display="none"},link.onerror=function(){document.getElementById("FontLoading").style.backgroundColor="#ffe2e2",document.getElementById("FontLoading").innerHTML="无法从 Google Fonts 加载字体，你的网络连接或者 DNS 可能有问题"}</script>